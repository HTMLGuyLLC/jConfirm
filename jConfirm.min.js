/*
	jConfirm
	https://github.com/HTMLGuyLLC/jConfirm
	Made with love by HTMLGuy, LLC
	https://htmlguy.com
	MIT Licensed
*/
(function(a){a.fn.jConfirm=function(b){if(1<this.length)return this.each(function(){a(this).jConfirm(b)}),this;if('undefined'==typeof this||1!==this.length)return this;b=a.extend({},a.jConfirm.defaults,b,a(this).data()),b.class+=' jc-'+b.theme+'-theme',b.class+=' jc-'+b.size;let c={dom:this,dom_wrapped:a(this),position_debug:b.position_debug,follow_href:b.follow_href,open_new_tab:b.open_new_tab,hide_on_click:b.hide_on_click,question:b.question,theme:b.theme,class:b.class,backdrop:b.backdrop,btns:b.btns,confirm_text:b.confirm_text,deny_text:b.deny_text,show_deny_btn:b.show_deny_btn,position:b.position,show_now:b.show_now,target:b.target,dataAttr:'jConfirm',createTooltipHTML:function(){c.btns||(c.btns=[{text:c.confirm_text,class:-1<c.theme.indexOf('bootstrap')?'btn btn-success':'jc-button-highlight',event:'confirm'}],c.show_deny_btn&&c.btns.push({text:c.deny_text,class:-1<c.theme.indexOf('bootstrap')?'btn btn-secondary':'',event:'deny'}));let f=`<div class='jc-tooltip ${c.class}' role='tooltip'>
                                <div class='jc-arrow'></div>`;return c.question&&0<c.question.length&&(f+='<div class=\'jc-question\'>'+c.question+'</div>'),f+='<div class=\'jc-buttons-wrap\'>',a.each(c.btns,function(g,h){f+=`<div class='jc-button-wrap'>
                                <a href='#' data-event='${h.event}' class='jc-button ${h.class}'>${h.text}</a>
                            </div>`}),f+='</div></div>',f},createBackdropHTML:function(){return!!c.backdrop&&`<div class='jc-backdrop jc-${c.backdrop}-backdrop'></div>`},destroy:function(){const f=c.dom_wrapped.data(c.dataAttr);'undefined'!=typeof f&&null!==f&&(f.dom_wrapped.off('touchstart mousedown',c.target,f.toggleTooltipHandler),f.dom_wrapped.off('click',c.target,f.preventDefaultHandler),a(window).off('resize',f.onResize),f.isVisible()&&f.hide(),f.dom_wrapped.data(f.dataAttr,null))},initialize:function(){return c.dom_wrapped.on('touchstart mousedown',c.target,c.toggleTooltipHandler),c.dom_wrapped.on('click',c.target,c.preventDefaultHandler),c.dom_wrapped.data(c.dataAttr,c),c.dom},preventDefaultHandler:function(f){return f.preventDefault(),!1},toggleTooltipHandler:function(f){return f.preventDefault(),c.isVisible()?c.hide():c.show(),!1},show:function(f){if(c.isVisible())return!1;null!==a.jConfirm.current&&a.jConfirm.current.hide();const g=a('body');'blurred'===c.backdrop?g.addClass('jc-blurred-body'):c.backdrop&&g.append(c.createBackdropHTML()),g.append(c.createTooltipHTML()),c.tooltip=a('.jc-tooltip'),c.attachTooltipHandlers(),c.positionTooltip(),a(window).on('resize',c.onResize),c.hide_on_click&&a(document).on('touchstart mousedown',c.onClickOutside);const h='jconfirm'+Date.now();c.tooltip.attr('id',h),c.dom.attr('aria-describedby',h),a.jConfirm.current={dom:c.dom,hide:c.hide},('undefined'==typeof f||f)&&c.dom.trigger('jc-show',{tooltip:c.tooltip})},isVisible:function(){return null!==a.jConfirm.current&&c.dom===a.jConfirm.current.dom},hide:function(f){return a(window).off('resize',c.onResize),c.hide_on_click&&a(document).off('touchstart mousedown',c.onClickOutside),c.dom.attr('aria-describedby',null),c.tooltip.remove(),'blurred'===c.backdrop?a('body').removeClass('jc-blurred-body'):c.backdrop&&a('.jc-backdrop').remove(),a.jConfirm.current=null,('undefined'==typeof f||f)&&c.dom.trigger('jc-hide'),c.dom},onResize:function(){c.hide(!1),c.show(!1)},onClickOutside:function(f){const g=a(f.target);g.hasClass('jc-tooltip')||g.parents('.jc-tooltip:first').length||c.hide()},attachTooltipHandlers:function(){c.tooltip.find('.jc-button').on('click',function(f){f.preventDefault();const g=a(this);return c.dom_wrapped.trigger(g.data('event')),c.hide(),'confirm'===g.data('event')&&c.follow_href&&(c.open_new_tab?window.open(c.dom_wrapped.prop('href'),'_blank'):window.location.href=c.dom_wrapped.prop('href')),!1})},positionTooltip:function(){c.positionDebug('-- Start positioning --');let f=c.tooltip.find('.jc-arrow'),[g,h,i,j,k,l]=c.calculateSafePosition(c.position);return('undefined'==typeof k&&(c.positionDebug('Couldn\'t fit preferred position, downsizing and trying again'),c.tooltip.addClass('jc-tight-fit'),[g,l,k,l,k,l]=c.calculateSafePosition(c.position)),'undefined'==typeof k&&'auto'!==c.position&&(c.positionDebug('Couldn\'t fit preferred position'),[g,l,k,l,k,l]=c.calculateSafePosition('auto')),'undefined'==typeof k)?(c.positionDebug('Doesn\'t appear to fit. Displaying centered'),c.tooltip.addClass('jc-centered').css({top:'50%',left:'50%','margin-left':-(i/2),'margin-top':-(j/2)}),f.remove(),void c.positionDebug('-- Done positioning --')):(c.positionDebug({'Setting Position':{Left:k,Top:l}}),c.tooltip.css('left',k),c.tooltip.css('top',l),60>h&&(c.positionDebug('Element is less than '+h+'px. Setting arrow to hug the side tighter'),g+=' jc-arrow-super-hug'),f.addClass('jc-arrow-'+g),c.positionDebug('-- Done positioning --'),c)},calculateSafePosition:function(f){let g=c.tooltip.find('.jc-arrow'),h=c.dom_wrapped.offset(),i=c.dom_wrapped.outerHeight(),j=c.dom_wrapped.outerWidth(),k=parseInt(c.dom_wrapped.css('marginLeft').replace('px','')),l=parseInt(c.dom_wrapped.css('marginTop').replace('px',''));h.left+=k,h.top+=l;let m=c.tooltip.outerWidth(),n=c.tooltip.outerHeight(),o=document.querySelector('body').offsetWidth,p=document.querySelector('body').offsetHeight,q=g.is(':visible')?g.outerHeight():0,r=g.is(':visible')?g.outerWidth():0,s={};s.below=5<p-(n+i+h.top),s.below_half=5<p-j/2-h.top-n/2,s.above=5<h.top-n,s.above_half=5<h.top-j/2-n/2,s.right=5<o-(m+j+h.left),s.right_half=5<o-h.left-j/2-m/2,s.right_full=5<o-h.left-m,s.left=5<h.left-m,s.left_half=5<h.left-j/2-m/2,s.left_full=5<h.left-m,c.positionDebug({'Clicked Element':{Left:h.left,Top:h.top}}),c.positionDebug({'Element Dimensions':{Height:i,Width:j},'Tooltip Dimensions':{Height:n,Width:m},'Window Dimensions':{Height:p,Width:o},'Arrow Dimensions':{Height:q,Width:r}}),c.positionDebug(s);let t,u,v;return('auto'===f||'bottom'===f)&&s.below&&s.left_half&&s.right_half?(c.positionDebug('Displaying below, centered'),t='top',u=h.left-m/2+j/2,v=h.top+i+q/2):('auto'===f||'top'===f)&&s.above&&s.left_half&&s.right_half?(c.positionDebug('Displaying above, centered'),t='bottom',u=h.left-m/2+j/2,v=h.top-n-q/2):('auto'===f||'left'===f)&&s.left&&s.below_half&&s.above_half?(c.positionDebug('Displaying left, centered'),t='right',u=h.left-m-r/2,v=h.top+i/2-n/2):('auto'===f||'right'===f)&&s.right&&s.below_half&&s.above_half?(c.positionDebug('Displaying right, centered'),t='left',u=h.left+j+r/2,v=h.top+i/2-n/2):('auto'===f||'bottom'===f)&&s.below&&s.right_full?(c.positionDebug('Displaying below, to the right'),t='top jc-arrow-hug-left',u=h.left,v=h.top+i+q/2):('auto'===f||'bottom'===f)&&s.below&&s.left_full?(c.positionDebug('Displaying below, to the left'),t='top jc-arrow-hug-right',u=h.left+j-m,v=h.top+i+q/2):('auto'===f||'top'===f)&&s.above&&s.right_full?(c.positionDebug('Displaying above, to the right'),t='bottom jc-arrow-hug-left',u=h.left,v=h.top-n-q/2):('auto'==f||'top'==f)&&s.above&&s.left_full&&(c.positionDebug('Displaying above, to the left'),t='bottom jc-arrow-hug-right',u=h.left+j-m,v=h.top-n-q/2),[t,j,m,n,u,v]},positionDebug:function(f){return!!c.position_debug&&('object'==typeof f?console.table(f):console.log(`Position: ${f}`))}};c.destroy();var d=c.initialize();return c.show_now&&c.show(),d},a.jConfirm={},a.jConfirm.current=null,a.jConfirm.defaults={btns:!1,position_debug:!1,question:'Are you sure?',confirm_text:'Yes',deny_text:'No',follow_href:!1,open_new_tab:!1,hide_on_click:!0,position:'auto',class:'',show_deny_btn:!0,theme:'black',size:'small',backdrop:!1,show_now:!1,target:null}})(jQuery);