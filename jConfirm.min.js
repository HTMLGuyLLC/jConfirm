/*
	jConfirm
	https://github.com/HTMLGuyLLC/jConfirm
	Made with love by HTMLGuy, LLC
	https://htmlguy.com
	MIT Licensed
*/
(function(a){a.fn.jConfirm=function(b){if(1<this.length)return this.each(function(){a(this).jConfirm(b)}),this;if('undefined'==typeof this||1!==this.length)return!1;b=a.extend({},a.jConfirm.defaults,b,a(this).data()),b.class+=' jc-'+b.theme+'-theme';let c='<div class=\'jc-tooltip '+b.class+'\' role=\'tooltip\'>';c+='<div class=\'jc-arrow\'></div>',b.question&&0<b.question.length&&(c+='<div class=\'jc-question\'>'+b.question+'</div>'),c+='<div class=\'jc-buttons-wrap\'>',b.btns||(b.btns=[{text:b.confirm_text,class:-1<b.theme.indexOf('bootstrap')?'btn btn-success jc-confirm':'jc-confirm jc-button-highlight',event:'confirm'}],b.show_deny_btn&&b.btns.push({text:b.deny_text,class:-1<b.theme.indexOf('bootstrap')?'btn btn-secondary jc-deny':'jc-deny',event:'deny'})),a.each(b.btns,function(f,g){c+='<div class=\'jc-button-wrap\'>',c+='<a href=\'#\' data-event=\''+g.event+'\' class=\'jc-button '+g.class+'\'>'+g.text+'</a>',c+='</div>'}),c+='</div>',c+='</div>';let d={dom:this,dom_wrapped:a(this),position_debug:b.position_debug,follow_href:b.follow_href,hide_on_click:b.hide_on_click,class:b.class,position:b.position,tooltipHTML:c,dataAttr:'jConfirm',destroy:function(){const f=d.dom_wrapped.data(d.dataAttr);'undefined'!=typeof f&&null!==f&&(f.dom_wrapped.off('touchstart mousedown',f.toggleTooltipHandler),f.dom_wrapped.off('click',f.preventDefaultHandler),a(window).off('resize',f.onResize),f.isVisible()&&f.hide(),f.dom_wrapped.data(f.dataAttr,null))},initialize:function(){return d.dom_wrapped.on('touchstart mousedown',d.toggleTooltipHandler),d.dom_wrapped.on('click',d.preventDefaultHandler),d.dom_wrapped.data(d.dataAttr,d),d.dom},preventDefaultHandler:function(f){return f.preventDefault(),!1},toggleTooltipHandler:function(f){return f.preventDefault(),d.isVisible()?d.hide():d.show(),!1},show:function(){if(d.isVisible())return!1;null!==a.jConfirm.current&&a.jConfirm.current.hide(),a('body').append(d.tooltipHTML),d.tooltip=a('.jc-tooltip'),d.attachTooltipHandlers(),d.positionTooltip(),a(window).on('resize',d.onResize),d.hide_on_click&&a(document).on('touchstart mousedown',d.onClickOutside);const f='jconfirm'+Date.now();d.tooltip.attr('id',f),d.dom.attr('aria-describedby',f),a.jConfirm.current={dom:d.dom,hide:d.hide},d.dom.trigger('jc-show',{tooltip:d.tooltip})},isVisible:function(){return null!==a.jConfirm.current&&d.dom===a.jConfirm.current.dom},hide:function(){return a(window).off('resize',d.onResize),d.hide_on_click&&a(document).off('touchstart mousedown',d.onClickOutside),d.dom.attr('aria-describedby',null),d.dom_wrapped.data(d.dataAttr).tooltip.remove(),a.jConfirm.current=null,d.dom.trigger('jc-hide'),d.dom},onResize:function(){d.hide(),d.show()},onClickOutside:function(f){const g=a(f.target);g.hasClass('jc-tooltip')||g.parents('.jc-tooltip:first').length||d.hide()},attachTooltipHandlers:function(){d.tooltip.find('.jc-button').on('click',function(f){f.preventDefault();const g=a(this);return d.dom_wrapped.trigger(g.data('event')),d.hide(),d.follow_href&&(window.location.href=d.dom_wrapped.prop('href')),!1})},positionTooltip:function(){d.positionDebug('-- Start positioning --');let f=d.tooltip.find('.jc-arrow'),[g,h,i,j,k,l]=d.calculateSafePosition(d.position);return('undefined'==typeof k&&(d.positionDebug('Couldn\'t fit preferred position, downsizing and trying again'),d.tooltip.addClass('jc-tight-fit'),[g,l,k,l,k,l]=d.calculateSafePosition(d.position)),'undefined'==typeof k&&'auto'!==d.position&&(d.positionDebug('Couldn\'t fit preferred position'),[g,l,k,l,k,l]=d.calculateSafePosition('auto')),'undefined'==typeof k)?(d.positionDebug('Doesn\'t appear to fit. Displaying centered'),d.tooltip.addClass('jc-centered').css({top:'50%',left:'50%','margin-left':-(i/2),'margin-top':-(j/2)}),f.remove(),void d.positionDebug('-- Done positioning --')):(d.positionDebug('Setting position: left:'+k+' top:'+l),d.tooltip.css('left',k),d.tooltip.css('top',l),60>h&&(d.positionDebug('Element is less than '+h+'px. Setting arrow to hug the side tighter'),g+=' jc-arrow-super-hug'),f.addClass('jc-arrow-'+g),d.positionDebug('-- Done positioning --'),d)},calculateSafePosition:function(f){let g=d.tooltip.find('.jc-arrow'),h=d.dom_wrapped.position(),i=d.dom_wrapped.outerHeight(),j=d.dom_wrapped.outerWidth(),k=parseInt(d.dom_wrapped.css('marginLeft').replace('px','')),l=parseInt(d.dom_wrapped.css('marginTop').replace('px',''));h.left+=k,h.top+=l;let m=d.tooltip.outerWidth(),n=d.tooltip.outerHeight(),o=document.querySelector('body').offsetWidth,p=document.querySelector('body').offsetHeight,q=g.is(':visible')?g.outerHeight():0,r=g.is(':visible')?g.outerWidth():0,s=5<p-(n+i+h.top),t=5<p-j/2-h.top-n/2,u=5<h.top-n,v=5<h.top-j/2-n/2,w=5<o-(m+j+h.left),x=5<o-h.left-j/2-m/2,y=5<o-h.left-m,z=5<h.left-m,A=5<h.left-j/2-m/2,B=5<h.left-m;d.positionDebug('Clicked element position: left:'+h.left+' top:'+h.top),d.positionDebug('Element dimensions: height:'+i+' width:'+j),d.positionDebug('Tooltip dimensions: height:'+n+' width:'+m),d.positionDebug('Window dimensions: height:'+p+' width:'+o),d.positionDebug('Arrow dimensions: height:'+q+' width:'+r),s&&d.positionDebug('Fits below: '+s),t&&d.positionDebug('Fits below half (for vertical centering): '+t),u&&d.positionDebug('Fits above: '+u),v&&d.positionDebug('Fits above half (for vertical centering): '+v),w&&d.positionDebug('Fits right (to the right of the element):'+w),x&&d.positionDebug('Fits right half (for horizontal centering): '+x),y&&d.positionDebug('Fits right full (starting where element starts): '+y),z&&d.positionDebug('Fits left (to the left of the element): '+z),A&&d.positionDebug('Fits left half (for horizontal centering): '+A),B&&d.positionDebug('Fits left full (starting where element starts): '+B);let C,D,E;return('auto'===f||'bottom'===f)&&s&&A&&x?(d.positionDebug('Displaying below, centered'),C='top',D=h.left-m/2+j/2,E=h.top+i+q/2):('auto'===f||'top'===f)&&u&&A&&x?(d.positionDebug('Displaying above, centered'),C='bottom',D=h.left-m/2+j/2,E=h.top-n-i/2-q/2):('auto'===f||'left'===f)&&z&&t&&v?(d.positionDebug('Displaying left, centered'),C='right',D=h.left-m-r/2,E=h.top+i/2-n/2):('auto'===f||'right'===f)&&w&&t&&v?(d.positionDebug('Displaying right, centered'),C='left',D=h.left+j+r/2,E=h.top+i/2-n/2):('auto'===f||'bottom'===f)&&s&&y?(d.positionDebug('Displaying below, to the right'),C='top jc-arrow-hug-left',D=h.left,E=h.top+i+q/2):('auto'===f||'bottom'===f)&&s&&B?(d.positionDebug('Displaying below, to the left'),C='top jc-arrow-hug-right',D=h.left+j-m,E=h.top+i+q/2):('auto'===f||'top'===f)&&u&&y?(d.positionDebug('Displaying above, to the right'),C='bottom jc-arrow-hug-left',D=h.left,E=h.top-n-i/2-q/2):('auto'==f||'top'==f)&&u&&B&&(d.positionDebug('Displaying above, to the left'),C='bottom jc-arrow-hug-right',D=h.left+j-m,E=h.top-n-i/2-q/2),[C,j,m,n,D,E]},positionDebug:function(f){d.position_debug&&console.log('Position: '+f)}};return d.destroy(),d.initialize()},a.jConfirm={},a.jConfirm.current=null,a.jConfirm.defaults={btns:!1,position_debug:!1,question:'Are you sure?',confirm_text:'Yes',deny_text:'No',follow_href:!1,hide_on_click:!0,position:'auto',class:'',show_deny_btn:!0,theme:'black'}})(jQuery);